//
// Copyright 2019 Insolar Technologies GmbH
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

package deposit

import (
	"fmt"
	"math/big"
)

var (
	VestingCoeffDenominator = "100000000000000000000"
	VestingCoeffs           = [...]string{
		"225589285569568",
		"452107832139583",
		"679559467578043",
		"907948035520931",
		"1137277395437170",
		"1367551422693830",
		"1598774008621640",
		"1830949060580730",
		"2064080502026660",
		"2298172272576720",
		"2533228328076530",
		"2769252640666840",
		"3006249198850700",
		"3244222007560840",
		"3483175088227350",
		"3723112478845640",
		"3964038234044660",
		"4205956425155450",
		"4448871140279920",
		"4692786484359920",
		"4937706579246650",
		"5183635563770270",
		"5430577593809850",
		"5678536842363640",
		"5927517499619520",
		"6177523773025880",
		"6428559887362660",
		"6680630084812770",
		"6933738625033790",
		"7187889785229930",
		"7443087860224310",
		"7699337162531560",
		"7956642022430680",
		"8215006788038200",
		"8474435825381680",
		"8734933518473500",
		"8996504269384920",
		"9259152498320450",
		"9522882643692630",
		"9787699162196920",
		"10053606528887100",
		"10320609237250900",
		"10588711799285700",
		"10857918745575300",
		"11128234625365900",
		"11399664006643300",
		"11672211476210100",
		"11945881639763000",
		"12220679121970800",
		"12496608566552500",
		"12773674636356000",
		"13051882013436400",
		"13331235399135500",
		"13611739514161300",
		"13893399098667300",
		"14176218912333300",
		"14460203734445100",
		"14745358363976000",
		"15031687619667200",
		"15319196340109700",
		"15607889383825900",
		"15897771629351700",
		"16188847975318900",
		"16481123340538200",
		"16774602664082100",
		"17069290905368300",
		"17365193044243800",
		"17662314081068800",
		"17960659036801200",
		"18260232953081800",
		"18561040892318900",
		"18863087937774500",
		"19166379193649600",
		"19470919785170900",
		"19776714858677200",
		"20083769581706300",
		"20392089143082700",
		"20701678753004800",
		"21012543643133300",
		"21324689066679200",
		"21638120298493200",
		"21952842635154200",
		"22268861395059400",
		"22586181918513500",
		"22904809567819500",
		"23224749727369200",
		"23546007803733900",
		"23868589225756100",
		"24192499444641200",
		"24517743934049400",
		"24844328190188300",
		"25172257731905900",
		"25501538100783700",
		"25832174861230600",
		"26164173600576600",
		"26497539929167300",
		"26832279480458900",
		"27168397911113200",
		"27505900901093300",
		"27844794153759500",
		"28185083395965900",
		"28526774378156700",
		"28869872874464000",
		"29214384682804800",
		"29560315624979400",
		"29907671546769500",
		"30256458318037100",
		"30606681832823700",
		"30958348009450000",
		"31311462790615800",
		"31666032143500100",
		"32022062059862700",
		"32379558556144800",
		"32738527673571000",
		"33098975478251000",
		"33460908061282700",
		"33824331538854700",
		"34189252052349700",
		"34555675768448600",
		"34923608879234100",
		"35293057602295900",
		"35664028180835700",
		"36036526883772400",
		"36410560005848200",
		"36786133867735000",
		"37163254816141300",
		"37541929223919200",
		"37922163490172300",
		"38303964040363800",
		"38687337326425000",
		"39072289826864500",
		"39458828046877400",
		"39846958518455600",
		"40236687800497600",
		"40628022478920200",
		"41020969166768900",
		"41415534504330300",
		"41811725159244000",
		"42209547826615300",
		"42609009229128500",
		"43010116117160100",
		"43412875268893500",
		"43817293490433100",
		"44223377615919400",
		"44631134507644300",
		"45040571056167600",
		"45451694180432900",
		"45864510827884700",
		"46279027974586200",
		"46695252625336300",
		"47113191813788800",
		"47532852602570800",
		"47954242083402500",
		"48377367377216300",
		"48802235634278000",
		"49228854034306800",
		"49657229786597400",
		"50087370130141200",
		"50519282333749000",
		"50952973696173800",
		"51388451546233900",
		"51825723242937000",
		"52264796175604500",
		"52705677763996300",
		"53148375458436200",
		"53592896739937800",
		"54039249120331000",
		"54487440142388900",
		"54937477379955300",
		"55389368438072300",
		"55843120953109700",
		"56298742592893000",
		"56756241056833600",
		"57215624076059100",
		"57676899413543200",
		"58140074864237400",
		"58605158255202900",
		"59072157445742400",
		"59541080327533000",
		"60011934824759900",
		"60484728894250000",
		"60959470525606300",
		"61436167741343300",
		"61914828597022300",
		"62395461181387200",
		"62878073616502100",
		"63362674057887400",
		"63849270694658800",
		"64337871749664600",
		"64828485479625500",
		"65321120175273600",
		"65815784161492700",
		"66312485797459100",
		"66811233476782500",
		"67312035627648200",
		"67814900712959400",
		"68319837230480300",
		"68826853712979300",
		"69335958728373700",
		"69847160879874300",
		"70360468806130800",
		"70875891181377500",
		"71393436715580400",
		"71913114154584000",
		"72434932280259200",
		"72958899910651700",
		"73485025900131200",
		"74013319139540600",
		"74543788556346700",
		"75076443114790700",
		"75611291816039900",
		"76148343698339800",
		"76687607837166800",
		"77229093345381500",
		"77772809373382700",
		"78318765109262200",
		"78866969778959700",
		"79417432646419400",
		"79970163013745500",
		"80525170221360500",
		"81082463648162300",
		"81642052711683000",
		"82203946868247800",
		"82768155613135200",
		"83334688480737100",
		"83903555044720000",
		"84474764918186900",
		"85048327753839700",
		"85624253244142200",
		"86202551121484100",
		"86783231158345200",
		"87366303167460700",
		"87951777001987300",
		"88539662555669000",
		"89129969763005000",
		"89722708599417100",
		"90317889081418600",
		"90915521266783400",
		"91515615254716000",
		"92118181186022000",
		"92723229243279800",
		"93330769651012500",
		"93940812675860500",
		"94553368626755300",
		"95168447855093500",
		"95786060754911900",
		"96406217763062900",
		"97028929359391200",
		"97654206066910500",
		"98282058451981700",
		"98912497124491200",
		"99545532738030300",
		"100181175990075000",
		"100819437622168000",
		"101460328420098000",
		"102103859214083000",
		"102750040878954000",
		"103398884334340000",
		"104050400544847000",
		"104704600520251000",
		"105361495315678000",
		"106021096031792000",
		"106683413814986000",
		"107348459857566000",
		"108016245397944000",
		"108686781720823000",
		"109360080157393000",
		"110036152085520000",
		"110715008929938000",
		"111396662162440000",
		"112081123302079000",
		"112768403915355000",
		"113458515616413000",
		"114151470067242000",
		"114847278977868000",
		"115545954106553000",
		"116247507259997000",
		"116951950293532000",
		"117659295111327000",
		"118369553666587000",
		"119082737961755000",
		"119798860048716000",
		"120517932028999000",
		"121239966053982000",
		"121964974325098000",
		"122692969094043000",
		"123423962662977000",
		"124157967384740000",
		"124894995663053000",
		"125635059952733000",
		"126378172759901000",
		"127124346642194000",
		"127873594208979000",
		"128625928121561000",
		"129381361093403000",
		"130139905890335000",
		"130901575330778000",
		"131666382285949000",
		"132434339680089000",
		"133205460490678000",
		"133979757748649000",
		"134757244538618000",
		"135537933999098000",
		"136321839322721000",
		"137108973756465000",
		"137899350601876000",
		"138692983215291000",
		"139489885008066000",
		"140290069446804000",
		"141093550053576000",
		"141900340406156000",
		"142710454138251000",
		"143523904939725000",
		"144340706556836000",
		"145160872792466000",
		"145984417506354000",
		"146811354615332000",
		"147641698093559000",
		"148475461972757000",
		"149312660342447000",
		"150153307350190000",
		"150997417201824000",
		"151845004161705000",
		"152696082552947000",
		"153550666757665000",
		"154408771217216000",
		"155270410432448000",
		"156135598963939000",
		"157004351432247000",
		"157876682518155000",
		"158752606962922000",
		"159632139568527000",
		"160515295197925000",
		"161402088775295000",
		"162292535286290000",
		"163186649778296000",
		"164084447360681000",
		"164985943205053000",
		"165891152545517000",
		"166800090678930000",
		"167712772965160000",
		"168629214827348000",
		"169549431752167000",
		"170473439290081000",
		"171401253055614000",
		"172332888727607000",
		"173268362049489000",
		"174207688829538000",
		"175150884941152000",
		"176097966323115000",
		"177048948979868000",
		"178003848981776000",
		"178962682465405000",
		"179925465633789000",
		"180892214756709000",
		"181862946170964000",
		"182837676280648000",
		"183816421557429000",
		"184799198540827000",
		"185786023838489000",
		"186776914126476000",
		"187771886149543000",
		"188770956721418000",
		"189774142725091000",
		"190781461113098000",
		"191792928907804000",
		"192808563201697000",
		"193828381157672000",
		"194852400009321000",
		"195880637061228000",
		"196913109689258000",
		"197949835340852000",
		"198990831535321000",
		"200036115864143000",
		"201085705991260000",
		"202139619653376000",
		"203197874660258000",
		"204260488895034000",
		"205327480314500000",
		"206398866949418000",
		"207474666904827000",
		"208554898360340000",
		"209639579570462000",
		"210728728864891000",
		"211822364648828000",
		"212920505403292000",
		"214023169685429000",
		"215130376128828000",
		"216242143443834000",
		"217358490417864000",
		"218479435915726000",
		"219604998879937000",
		"220735198331043000",
		"221870053367940000",
		"223009583168199000",
		"224153806988387000",
		"225302744164394000",
		"226456414111760000",
		"227614836326003000",
		"228778030382946000",
		"229946015939053000",
		"231118812731755000",
		"232296440579790000",
		"233478919383531000",
		"234666269125329000",
		"235858509869845000",
		"237055661764393000",
		"238257745039279000",
		"239464780008141000",
		"240676787068297000",
		"241893786701086000",
		"243115799472213000",
		"244342846032101000",
		"245574947116237000",
		"246812123545521000",
		"248054396226621000",
		"249301786152327000",
		"250554314401900000",
		"251812002141434000",
		"253074870624212000",
		"254342941191064000",
		"255616235270729000",
		"256894774380216000",
		"258178580125168000",
		"259467674200229000",
		"260762078389406000",
		"262061814566442000",
		"263366904695184000",
		"264677370829951000",
		"265993235115914000",
		"267314519789462000",
		"268641247178583000",
		"269973439703238000",
		"271311119875746000",
		"272654310301154000",
		"274003033677631000",
		"275357312796842000",
		"276717170544337000",
		"278082629899940000",
		"279453713938131000",
		"280830445828444000",
		"282212848835851000",
		"283600946321161000",
		"284994761741410000",
		"286394318650261000",
		"287799640698401000",
		"289210751633939000",
		"290627675302809000",
		"292050435649174000",
		"293479056715828000",
		"294913562644603000",
		"296353977676779000",
		"297800326153491000",
		"299252632516142000",
		"300710921306816000",
		"302175217168690000",
		"303645544846455000",
		"305121929186731000",
		"306604395138488000",
		"308092967753467000",
		"309587672186604000",
		"311088533696454000",
		"312595577645619000",
		"314108829501176000",
		"315628314835108000",
		"317154059324736000",
		"318686088753151000",
		"320224429009652000",
		"321769106090183000",
		"323320146097773000",
		"324877575242975000",
		"326441419844309000",
		"328011706328710000",
		"329588461231971000",
		"331171711199194000",
		"332761482985239000",
		"334357803455174000",
		"335960699584734000",
		"337570198460774000",
		"339186327281723000",
		"340809113358053000",
		"342438584112731000",
		"344074767081687000",
		"345717689914280000",
		"347367380373763000",
		"349023866337753000",
		"350687175798702000",
		"352357336864371000",
		"354034377758303000",
		"355718326820303000",
		"357409212506913000",
		"359107063391895000",
		"360811908166716000",
		"362523775641028000",
		"364242694743160000",
		"365968694520601000",
		"367701804140498000",
		"369442052890141000",
		"371189470177467000",
		"372944085531546000",
		"374705928603091000",
		"376475029164952000",
		"378251417112620000",
		"380035122464735000",
		"381826175363591000",
		"383624606075646000",
		"385430444992034000",
		"387243722629077000",
		"389064469628802000",
		"390892716759458000",
		"392728494916037000",
		"394571835120797000",
		"396422768523782000",
		"398281326403353000",
		"400147540166714000",
		"402021441350443000",
		"403903061621027000",
		"405792432775393000",
		"407689586741450000",
		"409594555578627000",
		"411507371478410000",
		"413428066764896000",
		"415356673895327000",
		"417293225460651000",
		"419237754186062000",
		"421190292931560000",
		"423150874692503000",
		"425119532600166000",
		"427096299922299000",
		"429081210063692000",
		"431074296566738000",
		"433075593111999000",
		"435085133518777000",
		"437102951745683000",
		"439129081891213000",
		"441163558194325000",
		"443206415035015000",
		"445257686934899000",
		"447317408557796000",
		"449385614710315000",
		"451462340342444000",
		"453547620548136000",
		"455641490565907000",
		"457743985779430000",
		"459855141718132000",
		"461974994057794000",
		"464103578621157000",
		"466240931378522000",
		"468387088448365000",
		"470542086097939000",
		"472705960743896000",
		"474878748952894000",
		"477060487442220000",
		"479251213080409000",
		"481450962887867000",
		"483659774037496000",
		"485877683855325000",
		"488104729821136000",
		"490340949569102000",
		"492586380888420000",
		"494841061723950000",
		"497105030176858000",
		"499378324505257000",
		"501660983124858000",
		"503953044609614000",
		"506254547692373000",
		"508565531265538000",
		"510886034381715000",
		"513216096254381000",
		"515555756258542000",
		"517905053931402000",
		"520264028973027000",
		"522632721247018000",
		"525011170781185000",
		"527399417768223000",
		"529797502566392000",
		"532205465700196000",
		"534623347861073000",
		"537051189908077000",
		"539489032868572000",
		"541936917938925000",
		"544394886485200000",
		"546862980043861000",
		"549341240322469000",
		"551829709200391000",
		"554328428729505000",
		"556837441134913000",
		"559356788815651000",
		"561886514345409000",
		"564426660473250000",
		"566977270124330000",
		"569538386400626000",
		"572110052581662000",
		"574692312125242000",
		"577285208668185000",
		"579888786027061000",
		"582503088198931000",
		"585128159362093000",
		"587764043876824000",
		"590410786286136000",
		"593068431316524000",
		"595737023878721000",
		"598416609068462000",
		"601107232167242000",
		"603808938643082000",
		"606521774151296000",
		"609245784535269000",
		"611981015827221000",
		"614727514248994000",
		"617485326212830000",
		"620254498322154000",
		"623035077372363000",
		"625827110351615000",
		"628630644441628000",
		"631445727018470000",
		"634272405653365000",
		"637110728113496000",
		"639960742362810000",
		"642822496562832000",
		"645696039073473000",
		"648581418453856000",
		"651478683463128000",
		"654387883061290000",
		"657309066410019000",
		"660242282873505000",
		"663187582019280000",
		"666145013619058000",
		"669114627649577000",
		"672096474293440000",
		"675090603939966000",
		"678097067186041000",
		"681115914836973000",
		"684147197907350000",
		"687190967621901000",
		"690247275416367000",
		"693316172938361000",
		"696397712048249000",
		"699491944820024000",
		"702598923542183000",
		"705718700718614000",
		"708851329069483000",
		"711996861532124000",
		"715155351261931000",
		"718326851633263000",
		"721511416240338000",
		"724709098898146000",
		"727919953643352000",
		"731144034735215000",
		"734381396656498000",
		"737632094114398000",
		"740896182041460000",
		"744173715596513000",
		"747464750165601000",
		"750769341362914000",
		"754087545031734000",
		"757419417245375000",
		"760765014308132000",
		"764124392756232000",
		"767497609358789000",
		"770884721118764000",
		"774285785273929000",
		"777700859297830000",
		"781130000900766000",
		"784573268030757000",
		"788030718874526000",
		"791502411858484000",
		"794988405649714000",
		"798488759156964000",
		"802003531531643000",
		"805532782168820000",
		"809076570708228000",
		"812634957035271000",
		"816208001282037000",
		"819795763828313000",
		"823398305302608000",
		"827015686583173000",
		"830647968799035000",
		"834295213331025000",
		"837957481812818000",
		"841634836131976000",
		"845327338430991000",
		"849035051108334000",
		"852758036819515000",
		"856496358478137000",
		"860250079256959000",
		"864019262588968000",
		"867803972168445000",
		"871604271952046000",
		"875420226159881000",
		"879251899276598000",
		"883099356052477000",
		"886962661504518000",
		"890841880917546000",
		"894737079845307000",
		"898648324111585000",
		"902575679811306000",
		"906519213311658000",
		"910478991253215000",
		"914455080551059000",
		"918447548395914000",
		"922456462255279000",
		"926481889874570000",
		"930523899278262000",
		"934582558771044000",
		"938657936938966000",
		"942750102650606000",
		"946859125058225000",
		"950985073598944000",
		"955128017995911000",
		"959288028259483000",
		"963465174688409000",
		"967659527871014000",
		"971871158686398000",
		"976100138305626000",
		"980346538192941000",
		"984610430106960000",
		"988891886101897000",
		"993190978528773000",
		"997507780036643000",
		"1001842363573820000",
		"1006194802389120000",
		"1010565170033080000",
		"1014953540359200000",
		"1019359987525230000",
		"1023784585994380000",
		"1028227410536580000",
		"1032688536229790000",
		"1037168038461200000",
		"1041665992928550000",
		"1046182475641430000",
		"1050717562922480000",
		"1055271331408770000",
		"1059843858053050000",
		"1064435220125060000",
		"1069045495212830000",
		"1073674761223980000",
		"1078323096387090000",
		"1082990579252950000",
		"1087677288695930000",
		"1092383303915320000",
		"1097108704436620000",
		"1101853570112960000",
		"1106617981126360000",
		"1111402017989160000",
		"1116205761545340000",
		"1121029292971910000",
		"1125872693780250000",
		"1130736045817520000",
		"1135619431268030000",
		"1140522932654630000",
		"1145446632840080000",
		"1150390615028500000",
		"1155354962766750000",
		"1160339759945820000",
		"1165345090802280000",
		"1170371039919710000",
		"1175417692230070000",
		"1180485133015220000",
		"1185573447908300000",
		"1190682722895190000",
		"1195813044315970000",
		"1200964498866380000",
		"1206137173599290000",
		"1211331155926160000",
		"1216546533618510000",
		"1221783394809420000",
		"1227041827995010000",
		"1232321922035950000",
		"1237623766158950000",
		"1242947449958240000",
		"1248293063397150000",
		"1253660696809570000",
		"1259050440901500000",
		"1264462386752600000",
		"1269896625817670000",
		"1275353249928290000",
		"1280832351294270000",
		"1286334022505290000",
		"1291858356532410000",
		"1297405446729670000",
		"1302975386835660000",
		"1308568270975120000",
		"1314184193660470000",
		"1319823249793500000",
		"1325485534666890000",
		"1331171143965880000",
		"1336880173769840000",
		"1342612720553940000",
		"1348368881190730000",
		"1354148752951830000",
		"1359952433509530000",
		"1365780020938460000",
		"1371631613717250000",
		"1377507310730190000",
		"1383407211268880000",
		"1389331415033960000",
		"1395280022136740000",
		"1401253133100930000",
		"1407250848864300000",
		"1413273270780430000",
		"1419320500620400000",
		"1425392640574510000",
		"1431489793253990000",
		"1437612061692780000",
		"1443759549349240000",
		"1449932360107870000",
		"1456130598281140000",
		"1462354368611180000",
		"1468603776271600000",
		"1474878926869240000",
		"1481179926445950000",
		"1487506881480410000",
		"1493859898889910000",
		"1500239086032150000",
		"1506644550707080000",
		"1513076401158710000",
		"1519534746076900000",
		"1526019694599270000",
		"1532531356312990000",
		"1539069841256640000",
		"1545635259922110000",
		"1552227723256390000",
		"1558847342663530000",
		"1565494230006450000",
		"1572168497608890000",
		"1578870258257250000",
		"1585599625202560000",
		"1592356712162340000",
		"1599141633322540000",
		"1605954503339480000",
		"1612795437341790000",
		"1619664550932320000",
		"1626561960190140000",
		"1633487781672460000",
		"1640442132416630000",
		"1647425129942110000",
		"1654436892252460000",
		"1661477537837310000",
		"1668547185674390000",
		"1675645955231520000",
		"1682773966468650000",
		"1689931339839880000",
		"1697118196295480000",
		"1704334657283950000",
		"1711580844754070000",
		"1718856881156960000",
		"1726162889448140000",
		"1733498993089620000",
		"1740865316051990000",
		"1748261982816500000",
		"1755689118377160000",
		"1763146848242890000",
		"1770635298439590000",
		"1778154595512300000",
		"1785704866527340000",
		"1793286239074430000",
		"1800898841268890000",
		"1808542801753760000",
		"1816218249702010000",
		"1823925314818700000",
		"1831664127343170000",
		"1839434818051270000",
		"1847237518257520000",
		"1855072359817400000",
		"1862939475129490000",
		"1870838997137800000",
		"1878771059333930000",
		"1886735795759390000",
		"1894733341007850000",
		"1902763830227390000",
		"1910827399122790000",
		"1918924183957860000",
		"1927054321557700000",
		"1935217949311030000",
		"1943415205172510000",
		"1951646227665080000",
		"1959911155882280000",
		"1968210129490620000",
		"1976543288731930000",
		"1984910774425720000",
		"1993312727971600000",
		"2001749291351630000",
		"2010220607132710000",
		"2018726818469040000",
		"2027268069104500000",
		"2035844503375070000",
		"2044456266211320000",
		"2053103503140810000",
		"2061786360290550000",
		"2070504984389520000",
		"2079259522771080000",
		"2088050123375510000",
		"2096876934752510000",
		"2105740106063680000",
		"2114639787085030000",
		"2123576128209590000",
		"2132549280449860000",
		"2141559395440400000",
		"2150606625440420000",
		"2159691123336290000",
		"2168813042644180000",
		"2177972537512640000",
		"2187169762725180000",
		"2196404873702900000",
		"2205678026507150000",
		"2214989377842100000",
		"2224339085057450000",
		"2233727306151070000",
		"2243154199771630000",
		"2252619925221350000",
		"2262124642458640000",
		"2271668512100830000",
		"2281251695426860000",
		"2290874354380040000",
		"2300536651570750000",
		"2310238750279210000",
		"2319980814458230000",
		"2329763008736000000",
		"2339585498418840000",
		"2349448449494010000",
		"2359352028632520000",
		"2369296403191950000",
		"2379281741219240000",
		"2389308211453610000",
		"2399375983329300000",
		"2409485226978540000",
		"2419636113234350000",
		"2429828813633490000",
		"2440063500419280000",
		"2450340346544590000",
		"2460659525674710000",
		"2471021212190320000",
		"2481425581190390000",
		"2491872808495200000",
		"2502363070649260000",
		"2512896544924320000",
		"2523473409322360000",
		"2534093842578590000",
		"2544758024164470000",
		"2555466134290780000",
		"2566218353910600000",
		"2577014864722430000",
		"2587855849173210000",
		"2598741490461440000",
		"2609671972540260000",
		"2620647480120560000",
		"2631668198674120000",
		"2642734314436680000",
		"2653846014411190000",
		"2665003486370870000",
		"2676206918862450000",
		"2687456501209330000",
		"2698752423514780000",
		"2710094876665140000",
		"2721484052333090000",
		"2732920142980840000",
		"2744403341863410000",
		"2755933843031880000",
		"2767511841336670000",
		"2779137532430870000",
		"2790811112773490000",
		"2802532779632800000",
		"2814302731089700000",
		"2826121166041010000",
		"2837988284202870000",
		"2849904286114090000",
		"2861869373139570000",
		"2873883747473670000",
		"2885947612143650000",
		"2898061171013090000",
		"2910224628785330000",
		"2922438191006950000",
		"2934702064071210000",
		"2947016455221580000",
		"2959381572555200000",
		"2971797625026440000",
		"2984264822450370000",
		"2996783375506390000",
		"3009353495741710000",
		"3021975395574970000",
		"3034649288299800000",
		"3047375388088480000",
		"3060153909995480000",
		"3072985069961170000",
		"3085869084815400000",
		"3098806172281230000",
		"3111796550978550000",
		"3124840440427840000",
		"3137938061053800000",
		"3151089634189150000",
		"3164295382078310000",
		"3177555527881210000",
		"3190870295677000000",
		"3204239910467900000",
		"3217664598182970000",
		"3231144585681910000",
		"3244680100758940000",
		"3258271372146600000",
		"3271918629519660000",
		"3285622103498960000",
		"3299382025655340000",
		"3313198628513550000",
		"3327072145556140000",
		"3341002811227460000",
		"3354990860937590000",
		"3369036531066330000",
		"3383140058967190000",
		"3397301682971380000",
		"3411521642391890000",
		"3425800177527490000",
		"3440137529666780000",
		"3454533941092340000",
		"3468989655084730000",
		"3483504915926660000",
		"3498079968907110000",
		"3512715060325470000",
		"3527410437495700000",
		"3542166348750490000",
		"3556983043445510000",
		"3571860771963580000",
		"3586799785718890000",
		"3601800337161300000",
		"3616862679780570000",
		"3631987068110630000",
		"3647173757733930000",
		"3662423005285700000",
		"3677735068458360000",
		"3693110206005780000",
		"3708548677747750000",
		"3724050744574300000",
		"3739616668450140000",
		"3755246712419090000",
		"3770941140608490000",
		"3786700218233730000",
		"3802524211602640000",
		"3818413388120100000",
		"3834368016292440000",
		"3850388365732090000",
		"3866474707162050000",
		"3882627312420510000",
		"3898846454465430000",
		"3915132407379160000",
		"3931485446373070000",
		"3947905847792180000",
		"3964393889119860000",
		"3980949848982500000",
		"3997574007154240000",
		"4014266644561660000",
		"4031028043288570000",
		"4047858486580740000",
		"4064758258850700000",
		"4081727645682590000",
		"4098766933836880000",
		"4115876411255340000",
		"4133056367065820000",
		"4150307091587160000",
		"4167628876334110000",
		"4185022014022230000",
		"4202486798572870000",
		"4220023525118110000",
		"4237632490005760000",
		"4255313990804350000",
		"4273068326308190000",
		"4290895796542400000",
		"4308796702767950000",
		"4326771347486840000",
		"4344820034447100000",
		"4362943068648000000",
		"4381140756345200000",
		"4399413405055860000",
		"4417761323563940000",
		"4436184821925310000",
		"4454684211473070000",
		"4473259804822780000",
		"4491911915877740000",
		"4510640859834290000",
		"4529446953187160000",
		"4548330513734810000",
		"4567291860584770000",
		"4586331314159080000",
		"4605449196199670000",
		"4624645829773810000",
		"4643921539279570000",
		"4663276650451300000",
		"4682711490365140000",
		"4702226387444540000",
		"4721821671465790000",
		"4741497673563650000",
		"4761254726236890000",
		"4781093163353920000",
		"4801013320158470000",
		"4821015533275200000",
		"4841100140715420000",
		"4861267481882800000",
		"4881517897579110000",
		"4901851730009960000",
		"4922269322790600000",
		"4942771020951720000",
		"4963357170945260000",
		"4984028120650330000",
		"5004784219379010000",
		"5025625817882300000",
		"5046553268356030000",
		"5067566924446810000",
		"5088667141258030000",
		"5109854275355830000",
		"5131128684775150000",
		"5152490729025750000",
		"5173940769098330000",
		"5195479167470570000",
		"5217106288113340000",
		"5238822496496750000",
		"5260628159596400000",
		"5282523645899560000",
		"5304509325411400000",
		"5326585569661210000",
		"5348752751708740000",
		"5371011246150450000",
		"5393361429125860000",
		"5415803678323920000",
		"5438338372989370000",
		"5460965893929150000",
		"5483686623518860000",
		"5506500945709190000",
		"5529409246032440000",
		"5552411911609000000",
		"5575509331153920000",
		"5598701894983450000",
		"5621989995021690000",
		"5645374024807150000",
		"5668854379499440000",
		"5692431455885910000",
		"5716105652388430000",
		"5739877369070010000",
		"5763747007641690000",
		"5787714971469200000",
		"5811781665579900000",
		"5835947496669500000",
		"5860212873109050000",
		"5884578204951750000",
		"5909043903939930000",
		"5933610383512000000",
		"5958278058809420000",
		"5983047346683730000",
		"6007918665703600000",
		"6032892436161860000",
		"6057969080082680000",
		"6083149021228620000",
		"6108432685107860000",
		"6133820498981320000",
		"6159312891869970000",
		"6184910294561980000",
		"6210613139620080000",
		"6236421861388830000",
		"6262336896001950000",
		"6288358681389750000",
		"6314487657286440000",
		"6340724265237660000",
		"6367068948607840000",
		"6393522152587780000",
		"6420084324202120000",
		"6446755912316920000",
		"6473537367647240000",
		"6500429142764740000",
		"6527431692105340000",
		"6554545471976900000",
		"6581770940566960000",
		"6609108557950410000",
		"6636558786097330000",
		"6664122088880780000",
		"6691798932084630000",
		"6719589783411420000",
		"6747495112490300000",
		"6775515390884940000",
		"6803651092101490000",
		"6831902691596600000",
		"6860270666785470000",
		"6888755497049870000",
		"6917357663746280000",
		"6946077650214020000",
		"6974915941783400000",
		"7003873025783930000",
		"7032949391552560000",
		"7062145530441960000",
		"7091461935828790000",
		"7120899103122070000",
		"7150457529771530000",
		"7180137715276020000",
		"7209940161191980000",
		"7239865371141870000",
		"7269913850822700000",
		"7300086108014600000",
		"7330382652589350000",
		"7360803996519050000",
		"7391350653884730000",
		"7422023140885050000",
		"7452821975845050000",
		"7483747679224870000",
		"7514800773628560000",
		"7545981783812900000",
		"7577291236696310000",
		"7608729661367710000",
		"7640297589095460000",
		"7671995553336380000",
		"7703824089744710000",
		"7735783736181210000",
		"7767875032722210000",
		"7800098521668790000",
		"7832454747555870000",
		"7864944257161460000",
		"7897567599515910000",
		"7930325325911150000",
		"7963217989910040000",
		"7996246147355690000",
		"8029410356380880000",
		"8062711177417510000",
		"8096149173206000000",
		"8129724908804880000",
		"8163438951600280000",
		"8197291871315560000",
		"8231284240020910000",
		"8265416632143020000",
		"8299689624474800000",
		"8334103796185130000",
		"8368659728828610000",
		"8403358006355450000",
		"8438199215121270000",
		"8473183943897070000",
		"8508312783879120000",
		"8543586328699010000",
		"8579005174433640000",
		"8614569919615310000",
		"8650281165241820000",
		"8686139514786650000",
		"8722145574209140000",
		"8758299951964730000",
		"8794603259015250000",
		"8831056108839240000",
		"8867659117442320000",
		"8904412903367590000",
		"8941318087706100000",
		"8978375294107340000",
		"9015585148789750000",
		"9052948280551350000",
		"9090465320780330000",
		"9128136903465760000",
		"9165963665208220000",
		"9203946245230680000",
		"9242085285389180000",
		"9280381430183760000",
		"9318835326769330000",
		"9357447624966570000",
		"9396218977272980000",
		"9435150038873840000",
		"9474241467653300000",
		"9513493924205540000",
		"9552908071845870000",
		"9592484576621980000",
		"9632224107325180000",
		"9672127335501720000",
		"9712194935464100000",
		"9752427584302500000",
		"9792825961896230000",
		"9833390750925150000",
		"9874122636881320000",
		"9915022308080470000",
		"9956090455673700000",
		"9997327773659150000",
		"10038734958893700000",
		"10080312711104800000",
		"10122061732902200000",
		"10163982729789900000",
		"10206076410178100000",
		"10248343485395100000",
		"10290784669699400000",
		"10333400680291500000",
		"10376192237326600000",
		"10419160063926100000",
		"10462304886190200000",
		"10505627433210100000",
		"10549128437080400000",
		"10592808632911400000",
		"10636668758841300000",
		"10680709556049200000",
		"10724931768766900000",
		"10769336144292300000",
		"10813923433001300000",
		"10858694388361000000",
		"10903649766942200000",
		"10948790328432100000",
		"10994116835647300000",
		"11039630054546700000",
		"11085330754244300000",
		"11131219707022400000",
		"11177297688344300000",
		"11223565476867900000",
		"11270023854458500000",
		"11316673606202000000",
		"11363515520418400000",
		"11410550388675000000",
		"11457779005799700000",
		"11505202169894500000",
		"11552820682349000000",
		"11600635347854000000",
		"11648646974415000000",
		"11696856373365900000",
		"11745264359382500000",
		"11793871750496800000",
		"11842679368110300000",
		"11891688037008000000",
		"11940898585372500000",
		"11990311844797900000",
		"12039928650303800000",
		"12089749840349600000",
		"12139776256848300000",
		"12190008745181200000",
		"12240448154211900000",
		"12291095336300400000",
		"12341951147318200000",
		"12393016446662100000",
		"12444292097269000000",
		"12495778965630700000",
		"12547477921808000000",
		"12599389839445800000",
		"12651515595787900000",
		"12703856071691600000",
		"12756412151642500000",
		"12809184723770000000",
		"12862174679861700000",
		"12915382915378700000",
		"12968810329470800000",
		"13022457824991600000",
		"13076326308513800000",
		"13130416690344500000",
		"13184729884540700000",
		"13239266808924400000",
		"13294028385098700000",
		"13349015538462600000",
		"13404229198227300000",
		"13459670297431800000",
		"13515339772958200000",
		"13571238565548100000",
		"13627367619818200000",
		"13683727884276300000",
		"13740320311337400000",
		"13797145857339600000",
		"13854205482560500000",
		"13911500151233500000",
		"13969030831563700000",
		"14026798495744500000",
		"14084804119974200000",
		"14143048684472000000",
		"14201533173495300000",
		"14260258575355600000",
		"14319225882435500000",
		"14378436091205800000",
		"14437890202241600000",
		"14497589220239800000",
		"14557534154036200000",
		"14617726016621800000",
		"14678165825160500000",
		"14738854601006500000",
		"14799793369720700000",
		"14860983161089000000",
		"14922425009138900000",
		"14984119952157600000",
		"15046069032709200000",
		"15108273297652300000",
		"15170733798157800000",
		"15233451589726800000",
		"15296427732208200000",
		"15359663289816500000",
		"15423159331150300000",
		"15486916929209800000",
		"15550937161415300000",
		"15615221109625200000",
		"15679769860154400000",
		"15744584503792600000",
		"15809666135822700000",
		"15875015856039500000",
		"15940634768767900000",
		"16006523982882000000",
		"16072684611823600000",
		"16139117773621100000",
		"16205824590908100000",
		"16272806190943000000",
		"16340063705627400000",
		"16407598271525600000",
		"16475411029883600000",
		"16543503126648700000",
		"16611875712488400000",
		"16680529942810300000",
		"16749466977781400000",
		"16818687982347500000",
		"16888194126253500000",
		"16957986584062400000",
		"17028066535175900000",
		"17098435163853600000",
		"17169093659233600000",
		"17240043215352400000",
		"17311285031164800000",
		"17382820310564700000",
		"17454650262405000000",
		"17526776100518200000",
		"17599199043736800000",
		"17671920315914200000",
		"17744941145945000000",
		"17818262767786000000",
		"17891886420477000000",
		"17965813348161600000",
		"18040044800108700000",
		"18114582030732700000",
		"18189426299615800000",
		"18264578871528500000",
		"18340041016451200000",
		"18415814009595800000",
		"18491899131426900000",
		"18568297667684000000",
		"18645010909402600000",
		"18722040152936500000",
		"18799386699979400000",
		"18877051857587100000",
		"18955036938199500000",
		"19033343259662700000",
		"19111972145251400000",
		"19190924923691200000",
		"19270202929181100000",
		"19349807501416100000",
		"19429739985609400000",
		"19510001732516000000",
		"19590594098454500000",
		"19671518445330900000",
		"19752776140661200000",
		"19834368557594300000",
		"19916297074935700000",
		"19998563077170500000",
		"20081167954486900000",
		"20164113102799400000",
		"20247399923773000000",
		"20331029824846300000",
		"20415004219255500000",
		"20499324526058400000",
		"20583992170158200000",
		"20669008582327700000",
		"20754375199233200000",
		"20840093463459400000",
		"20926164823533100000",
		"21012590733948000000",
		"21099372655189300000",
		"21186512053758200000",
		"21274010402196900000",
		"21361869179113500000",
		"21450089869206600000",
		"21538673963290900000",
		"21627622958321900000",
		"21716938357421800000",
		"21806621669904200000",
		"21896674411300200000",
		"21987098103383700000",
		"22077894274197000000",
		"22169064458077100000",
		"22260610195681200000",
		"22352533034012800000",
		"22444834526448100000",
		"22537516232761800000",
		"22630579719153900000",
		"22724026558275900000",
		"22817858329257600000",
		"22912076617733500000",
		"23006683015869700000",
		"23101679122391100000",
		"23197066542608000000",
		"23292846888443200000",
		"23389021778459800000",
		"23485592837887900000",
		"23582561698652500000",
		"23679929999400900000",
		"23777699385530400000",
		"23875871509216000000",
		"23974448029438600000",
		"24073430612012900000",
		"24172820929615300000",
		"24272620661812700000",
		"24372831495090300000",
		"24473455122880500000",
		"24574493245591400000",
		"24675947570635500000",
		"24777819812458500000",
		"24880111692568500000",
		"24982824939564800000",
		"25085961289167300000",
		"25189522484245900000",
		"25293510274849600000",
		"25397926418236500000",
		"25502772678903200000",
		"25608050828614800000",
		"25713762646434700000",
		"25819909918754800000",
		"25926494439325500000",
		"26033518009286100000",
		"26140982437195500000",
		"26248889539062300000",
		"26357241138375800000",
		"26466039066136700000",
		"26575285160888100000",
		"26684981268746400000",
		"26795129243432900000",
		"26905730946304700000",
		"27016788246386200000",
		"27128303020401000000",
		"27240277152803400000",
		"27352712535810100000",
		"27465611069432500000",
		"27578974661508500000",
		"27692805227735000000",
		"27807104691700100000",
		"27921874984915600000",
		"28037118046849900000",
		"28152835824960300000",
		"28269030274726300000",
		"28385703359682800000",
		"28502857051452500000",
		"28620493329780100000",
		"28738614182565300000",
		"28857221605896400000",
		"28976317604084100000",
		"29095904189695600000",
		"29215983383588100000",
		"29336557214943500000",
		"29457627721302100000",
		"29579196948597600000",
		"29701266951191500000",
		"29823839791907600000",
		"29946917542066900000",
		"30070502281523000000",
		"30194596098696800000",
		"30319201090611800000",
		"30444319362930100000",
		"30569953029987100000",
		"30696104214828100000",
		"30822775049243400000",
		"30949967673805000000",
		"31077684237902300000",
		"31205926899778800000",
		"31334697826568000000",
		"31463999194330800000",
		"31593833188091600000",
		"31724202001875600000",
		"31855107838745700000",
		"31986552910839700000",
		"32118539439408000000",
		"32251069654850800000",
		"32384145796755800000",
		"32517770113936300000",
		"32651944864469000000",
		"32786672315732100000",
		"32921954744443800000",
		"33057794436700900000",
		"33194193688016700000",
		"33331154803361000000",
		"33468680097197700000",
		"33606771893525100000",
		"33745432525914500000",
		"33884664337549500000",
		"34024469681266300000",
		"34164850919592800000",
		"34305810424788800000",
		"34447350578886200000",
		"34589473773729000000",
		"34732182411013700000",
		"34875478902330200000",
		"35019365669202400000",
		"35163845143128900000",
		"35308919765624300000",
		"35454591988260700000",
		"35600864272708400000",
		"35747739090778500000",
		"35895218924463800000",
		"36043306265981000000",
		"36192003617813100000",
		"36341313492751500000",
		"36491238413938200000",
		"36641780914908900000",
		"36792943539635600000",
		"36944728842569300000",
		"37097139388683900000",
		"37250177753518600000",
		"37403846523222300000",
		"37558148294596800000",
		"37713085675140800000",
		"37868661283093800000",
		"38024877747480800000",
		"38181737708156300000",
		"38339243815849000000",
		"38497398732206800000",
		"38656205129841300000",
		"38815665692373700000",
		"38975783114479400000",
		"39136560101934000000",
		"39297999371659000000",
		"39460103651767400000",
		"39622875681610200000",
		"39786318211822300000",
		"39950434004369400000",
		"40115225832594200000",
		"40280696481263800000",
		"40446848746616300000",
		"40613685436408300000",
		"40781209369962200000",
		"40949423378214000000",
		"41118330303761100000",
		"41287933000910300000",
		"41458234335725700000",
		"41629237186078000000",
		"41800944441692300000",
		"41973359004197200000",
		"42146483787174000000",
		"42320321716205600000",
		"42494875728926500000",
		"42670148775071600000",
		"42846143816527000000",
		"43022863827379200000",
		"43200311793966000000",
		"43378490714926500000",
		"43557403601252100000",
		"43737053476337300000",
		"43917443376030600000",
		"44098576348686000000",
		"44280455455214600000",
		"44463083769136100000",
		"44646464376630700000",
		"44830600376591500000",
		"45015494880676800000",
		"45201151013362600000",
		"45387571911995300000",
		"45574760726845000000",
		"45762720621158500000",
		"45951454771212800000",
		"46140966366369100000",
		"46331258609126000000",
		"46522334715174200000",
		"46714197913450800000",
		"46906851446193500000",
		"47100298568995800000",
		"47294542550861800000",
		"47489586674261400000",
		"47685434235185800000",
		"47882088543203500000",
		"48079552921515800000",
		"48277830707013100000",
		"48476925250331300000",
		"48676839915908600000",
		"48877578082042200000",
		"49079143140945100000",
		"49281538498804000000",
		"49484767575836500000",
		"49688833806348800000",
		"49893740638794300000",
		"50099491535830900000",
		"50306089974380700000",
		"50513539445687600000",
		"50721843455377300000",
		"50931005523515800000",
		"51141029184669200000",
		"51351917987963500000",
		"51563675497144500000",
		"51776305290637800000",
		"51989810961609600000",
		"52204196118027300000",
		"52419464382720400000",
		"52635619393441800000",
		"52852664802929400000",
		"53070604278967300000",
		"53289441504448600000",
		"53509180177436900000",
		"53729824011229200000",
		"53951376734418500000",
		"54173842090956900000",
		"54397223840218700000",
		"54621525757064200000",
		"54846751631903100000",
		"55072905270759100000",
		"55299990495333700000",
		"55528011143070900000",
		"55756971067222400000",
		"55986874136912200000",
		"56217724237202400000",
		"56449525269158500000",
		"56682281149915700000",
		"56915995812744700000",
		"57150673207118600000",
		"57386317298779300000",
		"57622932069804500000",
		"57860521518675300000",
		"58099089660343400000",
		"58338640526299400000",
		"58579178164640400000",
		"58820706640138800000",
		"59063230034310800000",
		"59306752445485400000",
		"59551277988873800000",
		"59796810796638800000",
		"60043355017964500000",
		"60290914819126800000",
		"60539494383563300000",
		"60789097911944600000",
		"61039729622244700000",
		"61291393749812600000",
		"61544094547443900000",
		"61797836285452300000",
		"62052623251742500000",
		"62308459751881700000",
		"62565350109173200000",
		"62823298664728900000",
		"63082309777543000000",
		"63342387824565500000",
		"63603537200776200000",
		"63865762319258900000",
		"64129067611276100000",
		"64393457526343900000",
		"64658936532307000000",
		"64925509115414200000",
		"65193179780394600000",
		"65461953050533400000",
		"65731833467748200000",
		"66002825592666100000",
		"66274934004700500000",
		"66548163302128800000",
		"66822518102169600000",
		"67098003041061300000",
		"67374622774140100000",
		"67652381975918600000",
		"67931285340165000000",
		"68211337579982600000",
		"68492543427888800000",
		"68774907635895800000",
		"69058434975590300000",
		"69343130238214700000",
		"69628998234747500000",
		"69916043795985000000",
		"70204271772622900000",
		"70493687035338000000",
		"70784294474870800000",
		"71076099002108000000",
		"71369105548165500000",
		"71663319064471700000",
		"71958744522851500000",
		"72255386915609700000",
		"72553251255615800000",
		"72852342576388700000",
		"73152665932181700000",
		"73454226398067700000",
		"73757029070025300000",
		"74061079065024700000",
		"74366381521114400000",
		"74672941597507500000",
		"74980764474669600000",
		"75289855354405800000",
		"75600219459948900000",
		"75911862036047300000",
		"76224788349054300000",
		"76539003687016300000",
		"76854513359762700000",
		"77171322698995600000",
		"77489437058379500000",
		"77808861813632200000",
		"78129602362615400000",
		"78451664125426200000",
		"78775052544488200000",
		"79099773084644000000",
		"79425831233247100000",
		"79753232500255000000",
		"80081982418322100000",
		"80412086542893300000",
		"80743550452297600000",
		"81076379747843000000",
		"81410580053910200000",
		"81746157018048700000",
		"82083116311071500000",
		"82421463627151100000",
		"82761204683915900000",
		"83102345222546600000",
		"83444891007873400000",
		"83788847828473300000",
		"84134221496768000000",
		"84481017849121900000",
		"84829242745941200000",
		"85178902071772400000",
		"85530001735402100000",
		"85882547669956700000",
		"86236545833002600000",
		"86592002206647100000",
		"86948922797639300000",
		"87307313637471700000",
		"87667180782482000000",
		"88028530313955700000",
		"88391368338228500000",
		"88755700986789700000",
		"89121534416386100000",
		"89488874809125300000",
		"89857728372580900000",
		"90228101339897100000",
		"90599999969894000000",
		"90973430547173300000",
		"91348399382224700000",
		"91724912811532500000",
		"92102977197682600000",
		"92482598929470100000",
		"92863784422007000000",
		"93246540116831000000",
		"93630872482014100000",
		"94016788012272100000",
		"94404293229074100000",
		"94793394680752800000",
		"95184098942615300000",
		"95576412617054100000",
		"95970342333658400000",
		"96365894749326800000",
		"96763076548379300000",
		"97161894442670100000",
		"97562355171701500000",
		"97964465502737500000",
		"98368232230918300000",
		"98773662179375000000",
		"99180762199344900000",
		"99589539170287300000",
		"100000000000000000000",
	}
)

func VestedByNow(amount *big.Int, passedSteps, totalSteps uint64) *big.Int {
	tableLen := uint64(len(VestingCoeffs))
	normalizedPassedSteps := passedSteps

	// This branch of code should never execute for normal deposits. But just in case.
	if totalSteps != tableLen {
		normalizedPassedSteps = passedSteps * tableLen / totalSteps
	}

	if normalizedPassedSteps >= tableLen {
		return amount
	}

	coeff, ok := new(big.Int).SetString(VestingCoeffs[normalizedPassedSteps], 10)
	if !ok {
		panic(fmt.Sprintf("failed to parse vesting coefficient #%d", normalizedPassedSteps))
	}
	denominator, ok := new(big.Int).SetString(VestingCoeffDenominator, 10)
	if !ok {
		panic("failed to parse vesting coefficients denominator")
	}

	return new(big.Int).Div(
		new(big.Int).Mul(amount, coeff),
		denominator,
	)
}
