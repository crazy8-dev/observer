//
// Copyright 2019 Insolar Technologies GmbH
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//

package deposit

import (
	"fmt"
	"math/big"
)

var (
	VestingCoeffDenominator = "100000000000000000000"
	VestingCoeffs           = [...]string{
		"225589285569568",
		"452107832139583",
		"679559467578043",
		"907948035520930",
		"1137277395437166",
		"1367551422693828",
		"1598774008621640",
		"1830949060580728",
		"2064080502026657",
		"2298172272576720",
		"2533228328076526",
		"2769252640666837",
		"3006249198850699",
		"3244222007560841",
		"3483175088227352",
		"3723112478845639",
		"3964038234044661",
		"4205956425155453",
		"4448871140279920",
		"4692786484359924",
		"4937706579246650",
		"5183635563770265",
		"5430577593809850",
		"5678536842363637",
		"5927517499619523",
		"6177523773025881",
		"6428559887362659",
		"6680630084812771",
		"6933738625033791",
		"7187889785229926",
		"7443087860224311",
		"7699337162531564",
		"7956642022430679",
		"8215006788038198",
		"8474435825381683",
		"8734933518473503",
		"8996504269384915",
		"9259152498320454",
		"9522882643692626",
		"9787699162196915",
		"10053606528887097",
		"10320609237250855",
		"10588711799285720",
		"10857918745575316",
		"11128234625365919",
		"11399664006643333",
		"11672211476210091",
		"11945881639762956",
		"12220679121970753",
		"12496608566552524",
		"12773674636356002",
		"13051882013436397",
		"13331235399135528",
		"13611739514161267",
		"13893399098667305",
		"14176218912333266",
		"14460203734445125",
		"14745358363975992",
		"15031687619667186",
		"15319196340109683",
		"15607889383825870",
		"15897771629351661",
		"16188847975318916",
		"16481123340538245",
		"16774602664082125",
		"17069290905368341",
		"17365193044243824",
		"17662314081068791",
		"17960659036801238",
		"18260232953081796",
		"18561040892318934",
		"18863087937774492",
		"19166379193649588",
		"19470919785170875",
		"19776714858677152",
		"20083769581706327",
		"20392089143082736",
		"20701678753004844",
		"21012543643133264",
		"21324689066679199",
		"21638120298493186",
		"21952842635154245",
		"22268861395059388",
		"22586181918513487",
		"22904809567819519",
		"23224749727369188",
		"23546007803733898",
		"23868589225756143",
		"24192499444641220",
		"24517743934049368",
		"24844328190188258",
		"25172257731905867",
		"25501538100783735",
		"25832174861230641",
		"26164173600576594",
		"26497539929167283",
		"26832279480458860",
		"27168397911113157",
		"27505900901093264",
		"27844794153759514",
		"28185083395965891",
		"28526774378156744",
		"28869872874464025",
		"29214384682804841",
		"29560315624979405",
		"29907671546769470",
		"30256458318037059",
		"30606681832823706",
		"30958348009450033",
		"31311462790615754",
		"31666032143500114",
		"32022062059862735",
		"32379558556144843",
		"32738527673570956",
		"33098975478250983",
		"33460908061282688",
		"33824331538854677",
		"34189252052349724",
		"34555675768448552",
		"34923608879234056",
		"35293057602295930",
		"35664028180835727",
		"36036526883772396",
		"36410560005848172",
		"36786133867734987",
		"37163254816141257",
		"37541929223919149",
		"37922163490172267",
		"38303964040363778",
		"38687337326425027",
		"39072289826864520",
		"39458828046877436",
		"39846958518455552",
		"40236687800497609",
		"40628022478920175",
		"41020969166768908",
		"41415534504330326",
		"41811725159244020",
		"42209547826615323",
		"42609009229128448",
		"43010116117160108",
		"43412875268893547",
		"43817293490433132",
		"44223377615919349",
		"44631134507644269",
		"45040571056167549",
		"45451694180432845",
		"45864510827884746",
		"46279027974586170",
		"46695252625336263",
		"47113191813788756",
		"47532852602570835",
		"47954242083402481",
		"48377367377216322",
		"48802235634277951",
		"49228854034306782",
		"49657229786597356",
		"50087370130141156",
		"50519282333748999",
		"50952973696173793",
		"51388451546233908",
		"51825723242937039",
		"52264796175604546",
		"52705677763996319",
		"53148375458436181",
		"53592896739937791",
		"54039249120331012",
		"54487440142388923",
		"54937477379955247",
		"55389368438072328",
		"55843120953109654",
		"56298742592892942",
		"56756241056833624",
		"57215624076059070",
		"57676899413543149",
		"58140074864237415",
		"58605158255202916",
		"59072157445742368",
		"59541080327532981",
		"60011934824759881",
		"60484728894249942",
		"60959470525606305",
		"61436167741343329",
		"61914828597022257",
		"62395461181387226",
		"62878073616502044",
		"63362674057887424",
		"63849270694658769",
		"64337871749664608",
		"64828485479625488",
		"65321120175273572",
		"65815784161492698",
		"66312485797459053",
		"66811233476782446",
		"67312035627648187",
		"67814900712959429",
		"68319837230480264",
		"68826853712979270",
		"69335958728373710",
		"69847160879874339",
		"70360468806130783",
		"70875891181377496",
		"71393436715580385",
		"71913114154583963",
		"72434932280259173",
		"72958899910651722",
		"73485025900131193",
		"74013319139540605",
		"74543788556346668",
		"75076443114790655",
		"75611291816039881",
		"76148343698339811",
		"76687607837166819",
		"77229093345381491",
		"77772809373382689",
		"78318765109262140",
		"78866969778959713",
		"79417432646419327",
		"79970163013745490",
		"80525170221360507",
		"81082463648162318",
		"81642052711682977",
		"82203946868247813",
		"82768155613135204",
		"83334688480737070",
		"83903555044719966",
		"84474764918186892",
		"85048327753839674",
		"85624253244142190",
		"86202551121484052",
		"86783231158345133",
		"87366303167460705",
		"87951777001987264",
		"88539662555668966",
		"89129969763004934",
		"89722708599417066",
		"90317889081418601",
		"90915521266783411",
		"91515615254715977",
		"92118181186021997",
		"92723229243279819",
		"93330769651012483",
		"93940812675860467",
		"94553368626755247",
		"95168447855093461",
		"95786060754911848",
		"96406217763062886",
		"97028929359391159",
		"97654206066910477",
		"98282058451981679",
		"98912497124491183",
		"99545532738030289",
		"100181175990075236",
		"100819437622167926",
		"101460328420097524",
		"102103859214082567",
		"102750040878954191",
		"103398884334339729",
		"104050400544847287",
		"104704600520251120",
		"105361495315677553",
		"106021096031791873",
		"106683413814985853",
		"107348459857566254",
		"108016245397943755",
		"108686781720823059",
		"109360080157393430",
		"110036152085520337",
		"110715008929937550",
		"111396662162440351",
		"112081123302079340",
		"112768403915355030",
		"113458515616413394",
		"114151470067242106",
		"114847278977867582",
		"115545954106552914",
		"116247507259996515",
		"116951950293531681",
		"117659295111326904",
		"118369553666586996",
		"119082737961755244",
		"119798860048716008",
		"120517932028998573",
		"121239966053981562",
		"121964974325098262",
		"122692969094042843",
		"123423962662977436",
		"124157967384739957",
		"124894995663052811",
		"125635059952732669",
		"126378172759900823",
		"127124346642194427",
		"127873594208978945",
		"128625928121561014",
		"129381361093402558",
		"130139905890335459",
		"130901575330777484",
		"131666382285948761",
		"132434339680089310",
		"133205460490677511",
		"133979757748649286",
		"134757244538618410",
		"135537933999097621",
		"136321839322720538",
		"137108973756464762",
		"137899350601875555",
		"138692983215290763",
		"139489885008066459",
		"140290069446803570",
		"141093550053575443",
		"141900340406156399",
		"142710454138251174",
		"143523904939725152",
		"144340706556836026",
		"145160872792465724",
		"145984417506353947",
		"146811354615332271",
		"147641698093559244",
		"148475461972756702",
		"149312660342446773",
		"150153307350189965",
		"150997417201824261",
		"151845004161705243",
		"152696082552947046",
		"153550666757664485",
		"154408771217215976",
		"155270410432447746",
		"156135598963938687",
		"157004351432246560",
		"157876682518155037",
		"158752606962921679",
		"159632139568527181",
		"160515295197925442",
		"161402088775294740",
		"162292535286289916",
		"163186649778295639",
		"164084447360680679",
		"164985943205053211",
		"165891152545517167",
		"166800090678929859",
		"167712772965160198",
		"168629214827348467",
		"169549431752166832",
		"170473439290081156",
		"171401253055613700",
		"172332888727606912",
		"173268362049488642",
		"174207688829537883",
		"175150884941152086",
		"176097966323115378",
		"177048948979867891",
		"178003848981776171",
		"178962682465404828",
		"179925465633789171",
		"180892214756709019",
		"181862946170963666",
		"182837676280647905",
		"183816421557429299",
		"184799198540826496",
		"185786023838488694",
		"186776914126476401",
		"187771886149543077",
		"188770956721418230",
		"189774142725091421",
		"190781461113097750",
		"191792928907804131",
		"192808563201697104",
		"193828381157671583",
		"194852400009320916",
		"195880637061228131",
		"196913109689258276",
		"197949835340852173",
		"198990831535321172",
		"200036115864143243",
		"201085705991260179",
		"202139619653376274",
		"203197874660257776",
		"204260488895034080",
		"205327480314499832",
		"206398866949418372",
		"207474666904826484",
		"208554898360340228",
		"209639579570462418",
		"210728728864890708",
		"211822364648827678",
		"212920505403291649",
		"214023169685429153",
		"215130376128828395",
		"216242143443834194",
		"217358490417864135",
		"218479435915726067",
		"219604998879936860",
		"220735198331042633",
		"221870053367940025",
		"223009583168199028",
		"224153806988386990",
		"225302744164394136",
		"226456414111760213",
		"227614836326002663",
		"228778030382946039",
		"229946015939052738",
		"231118812731755324",
		"232296440579790033",
		"233478919383531442",
		"234666269125329181",
		"235858509869845203",
		"237055661764393145",
		"238257745039278630",
		"239464780008141146",
		"240676787068297383",
		"241893786701085928",
		"243115799472213211",
		"244342846032101317",
		"245574947116236749",
		"246812123545520718",
		"248054396226621417",
		"249301786152326780",
		"250554314401899751",
		"251812002141434078",
		"253074870624212184",
		"254342941191064387",
		"255616235270729333",
		"256894774380216203",
		"258178580125168486",
		"259467674200228835",
		"260762078389405833",
		"262061814566442010",
		"263366904695183515",
		"264677370829951392",
		"265993235115914153",
		"267314519789461956",
		"268641247178582568",
		"269973439703238404",
		"271311119875745649",
		"272654310301154428",
		"274003033677631176",
		"275357312796841802",
		"276717170544337138",
		"278082629899939525",
		"279453713938131089",
		"280830445828443879",
		"282212848835851175",
		"283600946321160883",
		"284994761741410012",
		"286394318650261226",
		"287799640698400971",
		"289210751633938887",
		"290627675302809404",
		"292050435649174452",
		"293479056715828176",
		"294913562644603423",
		"296353977676779402",
		"297800326153491385",
		"299252632516142308",
		"300710921306815469",
		"302175217168689468",
		"303645544846454541",
		"305121929186730764",
		"306604395138487893",
		"308092967753466990",
		"309587672186603787",
		"311088533696453643",
		"312595577645618681",
		"314108829501175959",
		"315628314835108203",
		"317154059324735795",
		"318686088753150544",
		"320224429009651747",
		"321769106090183257",
		"323320146097773146",
		"324877575242974499",
		"326441419844308682",
		"328011706328709727",
		"329588461231971165",
		"331171711199194310",
		"332761482985238733",
		"334357803455174150",
		"335960699584734448",
		"337570198460773610",
		"339186327281723425",
		"340809113358053186",
		"342438584112730957",
		"344074767081687347",
		"345717689914280465",
		"347367380373763334",
		"349023866337753183",
		"350687175798702248",
		"352357336864371137",
		"354034377758303403",
		"355718326820302944",
		"357409212506912569",
		"359107063391895077",
		"360811908166715862",
		"362523775641028197",
		"364242694743159654",
		"365968694520601078",
		"367701804140497644",
		"369442052890141389",
		"371189470177466515",
		"372944085531546091",
		"374705928603091126",
		"376475029164951647",
		"378251417112619725",
		"380035122464734888",
		"381826175363591093",
		"383624606075646384",
		"385430444992034167",
		"387243722629076851",
		"389064469628801505",
		"390892716759457664",
		"392728494916037406",
		"394571835120797152",
		"396422768523782293",
		"398281326403353112",
		"400147540166713791",
		"402021441350442973",
		"403903061621026498",
		"405792432775392824",
		"407689586741450272",
		"409594555578626524",
		"411507371478410377",
		"413428066764895581",
		"415356673895327446",
		"417293225460651107",
		"419237754186062294",
		"421190292931560277",
		"423150874692503238",
		"425119532600165724",
		"427096299922298874",
		"429081210063692129",
		"431074296566738048",
		"433075593111999137",
		"435085133518776662",
		"437102951745682588",
		"439129081891213250",
		"441163558194325369",
		"443206415035015104",
		"445257686934898665",
		"447317408557795608",
		"449385614710315177",
		"451462340342443681",
		"453547620548135858",
		"455641490565907286",
		"457743985779430432",
		"459855141718132180",
		"461974994057794303",
		"464103578621156715",
		"466240931378522193",
		"468387088448364574",
		"470542086097939377",
		"472705960743895984",
		"474878748952893905",
		"477060487442219818",
		"479251213080408682",
		"481450962887866595",
		"483659774037496076",
		"485877683855324895",
		"488104729821136045",
		"490340949569101954",
		"492586380888419567",
		"494841061723949593",
		"497105030176857483",
		"499378324505257275",
		"501660983124858125",
		"503953044609613612",
		"506254547692373303",
		"508565531265537523",
		"510886034381714641",
		"513216096254380700",
		"515555756258542340",
		"517905053931402153",
		"520264028973026725",
		"522632721247017536",
		"525011170781184560",
		"527399417768222803",
		"529797502566391621",
		"532205465700196205",
		"534623347861072975",
		"537051189908076872",
		"539489032868572040",
		"541936917938924851",
		"544394886485200305",
		"546862980043861125",
		"549341240322469281",
		"551829709200391156",
		"554328428729505308",
		"556837441134912843",
		"559356788815650821",
		"561886514345409388",
		"564426660473250300",
		"566977270124330388",
		"569538386400625894",
		"572110052581661660",
		"574692312125241883",
		"577285208668185112",
		"579888786027060992",
		"582503088198931071",
		"585128159362092482",
		"587764043876824043",
		"590410786286136267",
		"593068431316523710",
		"595737023878721051",
		"598416609068462210",
		"601107232167242058",
		"603808938643081525",
		"606521774151296422",
		"609245784535268706",
		"611981015827220854",
		"614727514248994324",
		"617485326212830268",
		"620254498322153971",
		"623035077372362591",
		"625827110351615152",
		"628630644441627653",
		"631445727018469567",
		"634272405653364852",
		"637110728113495904",
		"639960742362810294",
		"642822496562831576",
		"645696039073473306",
		"648581418453856098",
		"651478683463128146",
		"654387883061289480",
		"657309066410018821",
		"660242282873504775",
		"663187582019279884",
		"666145013619058416",
		"669114627649577010",
		"672096474293439744",
		"675090603939965724",
		"678097067186040833",
		"681115914836972775",
		"684147197907349503",
		"687190967621901290",
		"690247275416366531",
		"693316172938360578",
		"696397712048248997",
		"699491944820023608",
		"702598923542182684",
		"705718700718614092",
		"708851329069483306",
		"711996861532123662",
		"715155351261931131",
		"718326851633262729",
		"721511416240338144",
		"724709098898145866",
		"727919953643352268",
		"731144034735214595",
		"734381396656498281",
		"737632094114397483",
		"740896182041459600",
		"744173715596513178",
		"747464750165600586",
		"750769341362913806",
		"754087545031733880",
		"757419417245375203",
		"760765014308132335",
		"764124392756232277",
		"767497609358789179",
		"770884721118764160",
		"774285785273928339",
		"777700859297829946",
		"781130000900765938",
		"784573268030756831",
		"788030718874526206",
		"791502411858484127",
		"794988405649713590",
		"798488759156963483",
		"802003531531642402",
		"805532782168819593",
		"809076570708227443",
		"812634957035270402",
		"816208001282036493",
		"819795763828313171",
		"823398305302608032",
		"827015686583173342",
		"830647968799034727",
		"834295213331024375",
		"837957481812817879",
		"841634836131975767",
		"845327338430990234",
		"849035051108333778",
		"852758036819515133",
		"856496358478136925",
		"860250079256959232",
		"864019262588967829",
		"867803972168444681",
		"871604271952045733",
		"875420226159880424",
		"879251899276598143",
		"883099356052476774",
		"886962661504518169",
		"890841880917545361",
		"894737079845307065",
		"898648324111584774",
		"902575679811305417",
		"906519213311657821",
		"910478991253214908",
		"914455080551059180",
		"918447548395914109",
		"922456462255278990",
		"926481889874569350",
		"930523899278261693",
		"934582558771043271",
		"938657936938965854",
		"942750102650605215",
		"946859125058224435",
		"950985073598943284",
		"955128017995910544",
		"959288028259483102",
		"963465174688408858",
		"967659527871014141",
		"971871158686397375",
		"976100138305626037",
		"980346538192940382",
		"984610430106959769",
		"988891886101896447",
		"993190978528772638",
		"997507780036643171",
		"1001842363573823314",
		"1006194802389121477",
		"1010565170033076755",
		"1014953540359202557",
		"1019359987525233525",
		"1023784585994379735",
		"1028227410536584375",
		"1032688536229787838",
		"1037168038461195804",
		"1041665992928553566",
		"1046182475641424872",
		"1050717562922477178",
		"1055271331408770552",
		"1059843858053052985",
		"1064435220125060921",
		"1069045495212825498",
		"1073674761223982442",
		"1078323096387089410",
		"1082990579252948379",
		"1087677288695931832",
		"1092383303915316940",
		"1097108704436623033",
		"1101853570112955489",
		"1106617981126356044",
		"1111402017989156568",
		"1116205761545340652",
		"1121029292971908834",
		"1125872693780251114",
		"1130736045817523974",
		"1135619431268034169",
		"1140522932654626335",
		"1145446632840078568",
		"1150390615028502178",
		"1155354962766747851",
		"1160339759945817721",
		"1165345090802282282",
		"1170371039919705299",
		"1175417692230071482",
		"1180485133015222488",
		"1185573447908298827",
		"1190682722895185230",
		"1195813044315965391",
		"1200964498866380174",
		"1206137173599292240",
		"1211331155926158482",
		"1216546533618505752",
		"1221783394809414745",
		"1227041827995009604",
		"1232321922035952560",
		"1237623766158946377",
		"1242947449958241822",
		"1248293063397151562",
		"1253660696809570651",
		"1259050440901503253",
		"1264462386752594411",
		"1269896625817670821",
		"1275353249928284915",
		"1280832351294267264",
		"1286334022505284530",
		"1291858356532405056",
		"1297405446729668447",
		"1302975386835664509",
		"1308568270975115840",
		"1314184193660470137",
		"1319823249793496307",
		"1325485534666887878",
		"1331171143965874555",
		"1336880173769837594",
		"1342612720553934720",
		"1348368881190729895",
		"1354148752951830556",
		"1359952433509530565",
		"1365780020938462020",
		"1371631613717252083",
		"1377507310730186583",
		"1383407211268881421",
		"1389331415033960744",
		"1395280022136741529",
		"1401253133100925293",
		"1407250848864296730",
		"1413273270780429982",
		"1419320500620400299",
		"1425392640574505050",
		"1431489793253989603",
		"1437612061692782397",
		"1443759549349234519",
		"1449932360107869695",
		"1456130598281138617",
		"1462354368611182633",
		"1468603776271602476",
		"1474878926869237043",
		"1481179926445946870",
		"1487506881480406793",
		"1493859898889905203",
		"1500239086032149719",
		"1506644550707083099",
		"1513076401158704349",
		"1519534746076896952",
		"1526019694599266805",
		"1532531356312985711",
		"1539069841256643887",
		"1545635259922109074",
		"1552227723256393437",
		"1558847342663529332",
		"1565494230006450951",
		"1572168497608885176",
		"1578870258257249192",
		"1585599625202557816",
		"1592356712162334639",
		"1599141633322537225",
		"1605954503339483002",
		"1612795437341790413",
		"1619664550932320770",
		"1626561960190135366",
		"1633487781672454675",
		"1640442132416628298",
		"1647425129942113597",
		"1654436892252461252",
		"1661477537837308809",
		"1668547185674384633",
		"1675645955231515674",
		"1682773966468649462",
		"1689931339839878532",
		"1697118196295478026",
		"1704334657283948853",
		"1711580844754068825",
		"1718856881156955937",
		"1726162889448135465",
		"1733498993089618508",
		"1740865316051988520",
		"1748261982816495460",
		"1755689118377161406",
		"1763146848242889627",
		"1770635298439588237",
		"1778154595512298694",
		"1785704866527334719",
		"1793286239074428842",
		"1800898841268888661",
		"1808542801753762821",
		"1816218249702013579",
		"1823925314818700821",
		"1831664127343172326",
		"1839434818051267211",
		"1847237518257522845",
		"1855072359817395988",
		"1862939475129490873",
		"1870838997137794917",
		"1878771059333927268",
		"1886735795759393596",
		"1894733341007851651",
		"1902763830227385127",
		"1910827399122787262",
		"1918924183957856563",
		"1927054321557695321",
		"1935217949311026156",
		"1943415205172510304",
		"1951646227665079780",
		"1959911155882280292",
		"1968210129490618673",
		"1976543288731925224",
		"1984910774425721960",
		"1993312727971603692",
		"2001749291351627782",
		"2010220607132711181",
		"2018726818469042047",
		"2027268069104497597",
		"2035844503375073763",
		"2044456266211323522",
		"2053103503140807362",
		"2061786360290550693",
		"2070504984389514441",
		"2079259522771075008",
		"2088050123375512559",
		"2096876934752512494",
		"2105740106063674205",
		"2114639787085033015",
		"2123576128209590796",
		"2132549280449857337",
		"2141559395440402122",
		"2150606625440416863",
		"2159691123336288792",
		"2168813042644183661",
		"2177972537512640541",
		"2187169762725176339",
		"2196404873702901411",
		"2205678026507146283",
		"2214989377842099121",
		"2224339085057453271",
		"2233727306151065544",
		"2243154199771628040",
		"2252619925221347602",
		"2262124642458638798",
		"2271668512100826625",
		"2281251695426859960",
		"2290874354380037850",
		"2300536651570746909",
		"2310238750279206693",
		"2319980814458231371",
		"2329763008736000437",
		"2339585498418837380",
		"2349448449494007801",
		"2359352028632520290",
		"2369296403191945704",
		"2379281741219244072",
		"2389308211453604682",
		"2399375983329297273",
		"2409485226978535371",
		"2419636113234352112",
		"2429828813633485087",
		"2440063500419277497",
		"2450340346544587627",
		"2460659525674710815",
		"2471021212190315993",
		"2481425581190390208",
		"2491872808495200486",
		"2502363070649261597",
		"2512896544924322211",
		"2523473409322359722",
		"2534093842578586525",
		"2544758024164473289",
		"2555466134290780219",
		"2566218353910602184",
		"2577014864722426690",
		"2587855849173205380",
		"2598741490461435946",
		"2609671972540258261",
		"2620647480120563699",
		"2631668198674114861",
		"2642734314436681955",
		"2653846014411188197",
		"2665003486370870477",
		"2676206918862452863",
		"2687456501209331896",
		"2698752423514777162",
		"2710094876665142607",
		"2721484052333093470",
		"2732920142980843625",
		"2744403341863409576",
		"2755933843031875205",
		"2767511841336671440",
		"2779137532430869458",
		"2790811112773485327",
		"2802532779632801659",
		"2814302731089700360",
		"2826121166041009602",
		"2837988284202866418",
		"2849904286114089344",
		"2861869373139569114",
		"2873883747473671146",
		"2885947612143651905",
		"2898061171013089840",
		"2910224628785330544",
		"2922438191006945795",
		"2934702064071207858",
		"2947016455221575931",
		"2959381572555199943",
		"2971797625026435102",
		"2984264822450374138",
		"2996783375506393426",
		"3009353495741712292",
		"3021975395574967582",
		"3034649288299804542",
		"3047375388088479838",
		"3060153909995482271",
		"3072985069961165632",
		"3085869084815397525",
		"3098806172281225179",
		"3111796550978553760",
		"3124840440427839941",
		"3137938061053803517",
		"3151089634189149779",
		"3164295382078311652",
		"3177555527881204683",
		"3190870295676998674",
		"3204239910467903545",
		"3217664598182970459",
		"3231144585681914455",
		"3244680100758941948",
		"3258271372146603894",
		"3271918629519660060",
		"3285622103498960638",
		"3299382025655343136",
		"3313198628513545906",
		"3327072145556136256",
		"3341002811227457292",
		"3354990860937590718",
		"3369036531066331441",
		"3383140058967185753",
		"3397301682971380631",
		"3411521642391891762",
		"3425800177527486140",
		"3440137529666784793",
		"3454533941092339383",
		"3468989655084726148",
		"3483504915926657896",
		"3498079968907111259",
		"3512715060325471289",
		"3527410437495696188",
		"3542166348750492438",
		"3556983043445514913",
		"3571860771963579483",
		"3586799785718893657",
		"3601800337161305265",
		"3616862679780569189",
		"3631987068110630739",
		"3647173757733926380",
		"3662423005285703192",
		"3677735068458356376",
		"3693110206005782020",
		"3708548677747752070",
		"3724050744574303184",
		"3739616668450145009",
		"3755246712419089277",
		"3770941140608494862",
		"3786700218233727405",
		"3802524211602644615",
		"3818413388120096146",
		"3834368016292442199",
		"3850388365732089479",
		"3866474707162047969",
		"3882627312420508514",
		"3898846454465432209",
		"3915132407379165457",
		"3931485446373071679",
		"3947905847792180372",
		"3964393889119860459",
		"3980949848982504729",
		"3997574007154242048",
		"4014266644561663432",
		"4031028043288568951",
		"4047858486580736131",
		"4064758258850705019",
		"4081727645682586141",
		"4098766933836884424",
		"4115876411255344619",
		"4133056367065821717",
		"4150307091587159685",
		"4167628876334106280",
		"4185022014022229258",
		"4202486798572871440",
		"4220023525118112711",
		"4237632490005759783",
		"4255313990804352602",
		"4273068326308192971",
		"4290895796542395362",
		"4308796702767953706",
		"4326771347486837310",
		"4344820034447097190",
		"4362943068648003630",
		"4381140756345196923",
		"4399413405055864478",
		"4417761323563938052",
		"4436184821925309718",
		"4454684211473072114",
		"4473259804822781599",
		"4491911915877738054",
		"4510640859834289667",
		"4529446953187164087",
		"4548330513734809288",
		"4567291860584771212",
		"4586331314159079741",
		"4605449196199667971",
		"4624645829773808142",
		"4643921539279570465",
		"4663276650451304850",
		"4682711490365145529",
		"4702226387444539273",
		"4721821671465794428",
		"4741497673563653536",
		"4761254726236889556",
		"4781093163353924285",
		"4801013320158470376",
		"4821015533275196940",
		"4841100140715416666",
		"4861267481882801388",
		"4881517897579112225",
		"4901851730009963714",
		"4922269322790601836",
		"4942771020951716026",
		"4963357170945265073",
		"4984028120650334237",
		"5004784219379013188",
		"5025625817882299617",
		"5046553268356025745",
		"5067566924446807730",
		"5088667141258028381",
		"5109854275355830977",
		"5131128684775147774",
		"5152490729025750726",
		"5173940769098326480",
		"5195479167470575671",
		"5217106288113339956",
		"5238822496496749192",
		"5260628159596401898",
		"5282523645899564468",
		"5304509325411398829",
		"5326585569661212993",
		"5348752751708741454",
		"5371011246150449169",
		"5393361429125861222",
		"5415803678323920233",
		"5438338372989366675",
		"5460965893929149023",
		"5483686623518859576",
		"5506500945709193878",
		"5529409246032442049",
		"5552411911609000244",
		"5575509331153915421",
		"5598701894983453691",
		"5621989995021694358",
		"5645374024807154472",
		"5668854379499437684",
		"5692431455885915009",
		"5716105652388425717",
		"5739877369070013613",
		"5763747007641686903",
		"5787714971469204439",
		"5811781665579895256",
		"5835947496669500328",
		"5860212873109046233",
		"5884578204951745883",
		"5909043903939929787",
		"5933610383512000902",
		"5958278058809422794",
		"5983047346683734862",
		"6007918665703597393",
		"6032892436161862298",
		"6057969080082679230",
		"6083149021228622527",
		"6108432685107855614",
		"6133820498981323865",
		"6159312891869968276",
		"6184910294561980770",
		"6210613139620080325",
		"6236421861388825177",
		"6262336896001953479",
		"6288358681389748239",
		"6314487657286443900",
		"6340724265237655810",
		"6367068948607836065",
		"6393522152587777229",
		"6420084324202121606",
		"6446755912316924630",
		"6473537367647241858",
		"6500429142764736767",
		"6527431692105335747",
		"6554545471976903903",
		"6581770940566958327",
		"6609108557950406359",
		"6636558786097329631",
		"6664122088880782002",
		"6691798932084627726",
		"6719589783411421268",
		"6747495112490302371",
		"6775515390884938316",
		"6803651092101485609",
		"6831902691596603016",
		"6860270666785470150",
		"6888755497049869891",
		"6917357663746283302",
		"6946077650214022014",
		"6974915941783398076",
		"7003873025783928507",
		"7032949391552563434",
		"7062145530441962804",
		"7091461935828792528",
		"7120899103122070583",
		"7150457529771526987",
		"7180137715276023457",
		"7209940161191981389",
		"7239865371141868122",
		"7269913850822702638",
		"7300086108014598729",
		"7330382652589351177",
		"7360803996519049707",
		"7391350653884726229",
		"7422023140885053438",
		"7452821975845054514",
		"7483747679224871107",
		"7514800773628556307",
		"7545981783812902299",
		"7577291236696313825",
		"7608729661367709395",
		"7640297589095461361",
		"7671995553336376227",
		"7703824089744706893",
		"7735783736181206515",
		"7767875032722215689",
		"7800098521668791251",
		"7832454747555867014",
		"7864944257161461671",
		"7897567599515911696",
		"7930325325911152800",
		"7963217989910037486",
		"7996246147355687283",
		"8029410356380885238",
		"8062711177417508645",
		"8096149173205999249",
		"8129724908804876470",
		"8163438951600281157",
		"8197291871315560973",
		"8231284240020908526",
		"8265416632143018915",
		"8299689624474802796",
		"8334103796185128587",
		"8368659728828614641",
		"8403358006355450549",
		"8438199215121272578",
		"8473183943897068248",
		"8508312783879121155",
		"8543586328699012688",
		"8579005174433643188",
		"8614569919615309989",
		"8650281165241821557",
		"8686139514786651860",
		"8722145574209140550",
		"8758299951964730600",
		"8794603259015250362",
		"8831056108839240026",
		"8867659117442318328",
		"8904412903367590892",
		"8941318087706104367",
		"8978375294107339421",
		"9015585148789749536",
		"9052948280551349757",
		"9090465320780337366",
		"9128136903465756957",
		"9165963665208225197",
		"9203946245230677780",
		"9242085285389177451",
		"9280381430183760882",
		"9318835326769328575",
		"9357447624966576393",
		"9396218977272982608",
		"9435150038873836575",
		"9474241467653302106",
		"9513493924205539131",
		"9552908071845866988",
		"9592484576621977676",
		"9632224107325182416",
		"9672127335501719269",
		"9712194935464098233",
		"9752427584302503227",
		"9792825961896226005",
		"9833390750925156964",
		"9874122636881321746",
		"9915022308080470581",
		"9956090455673702321",
		"9997327773659146765",
		"10038734958893695548",
		"10080312711104771894",
		"10122061732902161435",
		"10163982729789880488",
		"10206076410178099855",
		"10248343485395115803",
		"10290784669699375164",
		"10333400680291537909",
		"10376192237326598011",
		"10419160063926061199",
		"10462304886190156028",
		"10505627433210103227",
		"10549128437080446119",
		"10592808632911414334",
		"10636668758841344439",
		"10680709556049161612",
		"10724931768766897410",
		"10769336144292268597",
		"10813923433001308704",
		"10858694388361042615",
		"10903649766942222210",
		"10948790328432113361",
		"10994116835647328722",
		"11039630054546725745",
		"11085330754244339390",
		"11131219707022391163",
		"11177297688344330073",
		"11223565476867945756",
		"11270023854458514900",
		"11316673606202028168",
		"11363515520418446258",
		"11410550388675025357",
		"11457779005799691163",
		"11505202169894476749",
		"11552820682349003445",
		"11600635347854024170",
		"11648646974415023669",
		"11696856373365870085",
		"11745264359382530383",
		"11793871750496830175",
		"11842679368110281545",
		"11891688037007966394",
		"11940898585372468343",
		"11990311844797872653",
		"12039928650303813317",
		"12089749840349592324",
		"12139776256848340552",
		"12190008745181249438",
		"12240448154211856779",
		"12291095336300388030",
		"12341951147318164228",
		"12393016446662061258",
		"12444292097269035735",
		"12495778965630707779",
		"12547477921807997924",
		"12599389839445840344",
		"12651515595787932166",
		"12703856071691574380",
		"12756412151642540497",
		"12809184723770036806",
		"12862174679861701487",
		"12915382915378684214",
		"12968810329470764619",
		"13022457824991556796",
		"13076326308513766538",
		"13130416690344504093",
		"13184729884540680178",
		"13239266808924432528",
		"13294028385098657918",
		"13349015538462566388",
		"13404229198227332609",
		"13459670297431797214",
		"13515339772958220865",
		"13571238565548138233",
		"13627367619818236965",
		"13683727884276325470",
		"13740320311337367309",
		"13797145857339562780",
		"13854205482560530415",
		"13911500151233513467",
		"13969030831563683525",
		"14026798495744505213",
		"14084804119974159153",
		"14143048684472039888",
		"14201533173495323181",
		"14260258575355594379",
		"14319225882435548946",
		"14378436091205770708",
		"14437890202241560055",
		"14497589220239850971",
		"14557534154036186335",
		"14617726016621759854",
		"14678165825160546798",
		"14738854601006481925",
		"14799793369720720681",
		"14860983161088978099",
		"14922425009138917673",
		"14984119952157637367",
		"15046069032709205592",
		"15108273297652288769",
		"15170733798157834404",
		"15233451589726831887",
		"15296427732208164873",
		"15359663289816499753",
		"15423159331150285145",
		"15486916929209804116",
		"15550937161415306908",
		"15615221109625218587",
		"15679769860154424421",
		"15744584503792616314",
		"15809666135822736388",
		"15875015856039487172",
		"15940634768767902862",
		"16006523982882026047",
		"16072684611823642719",
		"16139117773621083906",
		"16205824590908141091",
		"16272806190943026050",
		"16340063705627413948",
		"16407598271525586364",
		"16475411029883618718",
		"16543503126648687051",
		"16611875712488410883",
		"16680529942810320975",
		"16749466977781365950",
		"16818687982347521603",
		"16888194126253486260",
		"16957986584062437196",
		"17028066535175881424",
		"17098435163853595297",
		"17169093659233622406",
		"17240043215352376937",
		"17311285031164819203",
		"17382820310564719990",
		"17454650262404999838",
		"17526776100518165479",
		"17599199043736804548",
		"17671920315914196875",
		"17744941145945000715",
		"17818262767786005595",
		"17891886420476982300",
		"17965813348161643880",
		"18040044800108648304",
		"18114582030732714890",
		"18189426299615826798",
		"18264578871528505676",
		"18340041016451208433",
		"18415814009595754541",
		"18491899131426900449",
		"18568297667683977825",
		"18645010909402598420",
		"18722040152936497703",
		"18799386699979420134",
		"18877051857587134886",
		"18955036938199509855",
		"19033343259662693913",
		"19111972145251385213",
		"19190924923691204950",
		"19270202929181126649",
		"19349807501416049771",
		"19429739985609414954",
		"19510001732515955264",
		"19590594098454508498",
		"19671518445330948843",
		"19752776140661193471",
		"19834368557594309057",
		"19916297074935726541",
		"19998563077170528057",
		"20081167954486861537",
		"20164113102799410826",
		"20247399923773001795",
		"20331029824846283404",
		"20415004219255505901",
		"20499324526058410045",
		"20583992170158210699",
		"20669008582327658141",
		"20754375199233235371",
		"20840093463459433143",
		"20926164823533111025",
		"21012590733948000032",
		"21099372655189260750",
		"21186512053758180251",
		"21274010402196938396",
		"21361869179113504580",
		"21450089869206617754",
		"21538673963290877466",
		"21627622958321940371",
		"21716938357421805561",
		"21806621669904233118",
		"21896674411300226514",
		"21987098103383664882",
		"22077894274197010227",
		"22169064458077131218",
		"22260610195681218570",
		"22352533034012844748",
		"22444834526448081968",
		"22537516232761767298",
		"22630579719153859352",
		"22724026558275897680",
		"22817858329257587057",
		"22912076617733473371",
		"23006683015869747177",
		"23101679122391144405",
		"23197066542607966410",
		"23292846888443208275",
		"23389021778459787026",
		"23485592837887908635",
		"23582561698652526605",
		"23679929999400914364",
		"23777699385530357001",
		"23875871509215967902",
		"23974448029438596985",
		"24073430612012861051",
		"24172820929615310148",
		"24272620661812677189",
		"24372831495090277465",
		"24473455122880488632",
		"24574493245591383372",
		"24675947570635456407",
		"24777819812458470871",
		"24880111692568454562",
		"24982824939564760025",
		"25085961289167296728",
		"25189522484245868705",
		"25293510274849584362",
		"25397926418236488333",
		"25502772678903218306",
		"25608050828614825622",
		"25713762646434740189",
		"25819909918754802014",
		"25926494439325464824",
		"26033518009286121808",
		"26140982437195520171",
		"26248889539062314480",
		"26357241138375803180",
		"26466039066136687330",
		"26575285160888051372",
		"26684981268746404969",
		"26795129243432902477",
		"26905730946304662332",
		"27016788246386197469",
		"27128303020401034473",
		"27240277152803410443",
		"27352712535810125294",
		"27465611069432499524",
		"27578974661508509624",
		"27692805227735001194",
		"27807104691700079701",
		"27921874984915606710",
		"28037118046849857089",
		"28152835824960259492",
		"28269030274726347773",
		"28385703359682767921",
		"28502857051452484826",
		"28620493329780094527",
		"28738614182565264121",
		"28857221605896354876",
		"28976317604084123047",
		"29095904189695609432",
		"29215983383588134403",
		"29336557214943459470",
		"29457627721302076517",
		"29579196948597635819",
		"29701266951191518384",
		"29823839791907563734",
		"29946917542066908701",
		"30070502281522998311",
		"30194596098696757646",
		"30319201090611841431",
		"30444319362930094552",
		"30569953029987129156",
		"30696104214828057177",
		"30822775049243383849",
		"30949967673804978929",
		"31077684237902319930",
		"31205926899778763106",
		"31334697826568025380",
		"31463999194330821707",
		"31593833188091624553",
		"31724202001875595469",
		"31855107838745649884",
		"31986552910839693986",
		"32118539439408011482",
		"32251069654850789136",
		"32384145796755814395",
		"32517770113936317333",
		"32651944864468979146",
		"32786672315732084959",
		"32921954744443843177",
		"33057794436700854712",
		"33194193688016743193",
		"33331154803360962812",
		"33468680097197728296",
		"33606771893525144712",
		"33745432525914448307",
		"33884664337549480484",
		"34024469681266267251",
		"34164850919592770761",
		"34305810424788835133",
		"34447350578886243299",
		"34589473773728990346",
		"34732182411013706735",
		"34875478902330242503",
		"35019365669202390245",
		"35163845143128857895",
		"35308919765624302567",
		"35454591988260647506",
		"35600864272708443447",
		"35747739090778524184",
		"35895218924463762055",
		"36043306265980989966",
		"36192003617813123250",
		"36341313492751481373",
		"36491238413938209550",
		"36641780914908927968",
		"36792943539635569738",
		"36944728842569329874",
		"37097139388683852967",
		"37250177753518604051",
		"37403846523222333831",
		"37558148294596821470",
		"37713085675140772812",
		"37868661283093818515",
		"38024877747480839707",
		"38181737708156326949",
		"38339243815849038954",
		"38497398732206755678",
		"38656205129841292311",
		"38815665692373646500",
		"38975783114479350955",
		"39136560101933998146",
		"39297999371658987044",
		"39460103651767408639",
		"39622875681610181253",
		"39786318211822302437",
		"39950434004369372864",
		"40115225832594220145",
		"40280696481263822406",
		"40446848746616320680",
		"40613685436408303308",
		"40781209369962212463",
		"40949423378214044877",
		"41118330303761141397",
		"41287933000910248537",
		"41458234335725729913",
		"41629237186078038579",
		"41800944441692311493",
		"41973359004197213773",
		"42146483787173977253",
		"42320321716205644424",
		"42494875728926473357",
		"42670148775071631286",
		"42846143816526982562",
		"43022863827379187462",
		"43200311793965945339",
		"43378490714926448701",
		"43557403601252081548",
		"43737053476337256485",
		"43917443376030557145",
		"44098576348686024939",
		"44280455455214640103",
		"44463083769136096945",
		"44646464376630690118",
		"44830600376591528411",
		"45015494880676831801",
		"45201151013362589337",
		"45387571911995278073",
		"45574760726844965042",
		"45762720621158464729",
		"45951454771212846273",
		"46140966366369084994",
		"46331258609125969272",
		"46522334715174218367",
		"46714197913450800081",
		"46906851446193525978",
		"47100298568995835335",
		"47294542550861801144",
		"47489586674261363708",
		"47685434235185825136",
		"47882088543203527031",
		"48079552921515789077",
		"48277830707013058564",
		"48476925250331304173",
		"48676839915908637346",
		"48877578082042166807",
		"49079143140945091783",
		"49281538498803995063",
		"49484767575836469122",
		"49688833806348847721",
		"49893740638794265019",
		"50099491535830942279",
		"50306089974380685525",
		"50513539445687638540",
		"50721843455377324527",
		"50931005523515804345",
		"51141029184669228868",
		"51351917987963546785",
		"51563675497144489945",
		"51776305290637769651",
		"51989810961609561612",
		"52204196118027257345",
		"52419464382720371009",
		"52635619393441823721",
		"52852664802929361087",
		"53070604278967326017",
		"53289441504448620268",
		"53509180177436932446",
		"53729824011229232461",
		"53951376734418532432",
		"54173842090956902950",
		"54397223840218711377",
		"54621525757064171014",
		"54846751631903134516",
		"55072905270759131557",
		"55299990495333695150",
		"55528011143070932220",
		"55756971067222405036",
		"55986874136912201383",
		"56217724237202360005",
		"56449525269158473683",
		"56682281149915647589",
		"56915995812744701876",
		"57150673207118618535",
		"57386317298779276896",
		"57622932069804477795",
		"57860521518675267494",
		"58099089660343428143",
		"58338640526299401223",
		"58579178164640399728",
		"58820706640138786802",
		"59063230034310776339",
		"59306752445485411140",
		"59551277988873829727",
		"59796810796638788510",
		"60043355017964517017",
		"60290914819126772972",
		"60539494383563330348",
		"60789097911944611763",
		"61039729622244698337",
		"61291393749812594915",
		"61544094547443850551",
		"61797836285452323324",
		"62052623251742466959",
		"62308459751881684063",
		"62565350109173167858",
		"62823298664728888241",
		"63082309777542999729",
		"63342387824565504761",
		"63603537200776194549",
		"63865762319258911894",
		"64129067611276135974",
		"64393457526343911290",
		"64658936532306943157",
		"64925509115414192784",
		"65193179780394638900",
		"65461953050533394638",
		"65731833467748179700",
		"66002825592666058973",
		"66274934004700492007",
		"66548163302128748864",
		"66822518102169592424",
		"67098003041061315965",
		"67374622774140058290",
		"67652381975918551848",
		"67931285340165037389",
		"68211337579982600498",
		"68492543427888830098",
		"68774907635895798918",
		"69058434975590332616",
		"69343130238214689687",
		"69628998234747485618",
		"69916043795985027831",
		"70204271772622905967",
		"70493687035338004065",
		"70784294474870801394",
		"71076099002107973046",
		"71369105548165467922",
		"71663319064471742159",
		"71958744522851503244",
		"72255386915609665088",
		"72553251255615780479",
		"72852342576388706696",
		"73152665932181670793",
		"73454226398067679060",
		"73757029070025292849",
		"74061079065024737478",
		"74366381521114377495",
		"74672941597507513922",
		"74980764474669603370",
		"75289855354405810228",
		"75600219459948847511",
		"75911862036047306201",
		"76224788349054262149",
		"76539003687016271549",
		"76854513359762721691",
		"77171322698995570288",
		"77489437058379462275",
		"77808861813632168580",
		"78129602362615424571",
		"78451664125426190388",
		"78775052544488211037",
		"79099773084643965060",
		"79425831233247079499",
		"79753232500255000215",
		"80081982418322117390",
		"80412086542893268515",
		"80743550452297629949",
		"81076379747842941548",
		"81410580053910208687",
		"81746157018048715148",
		"82083116311071491200",
		"82421463627151103637",
		"82761204683915878810",
		"83102345222546591952",
		"83444891007873389643",
		"83788847828473300705",
		"84134221496767958026",
		"84481017849121908814",
		"84829242745941202397",
		"85178902071772411020",
		"85530001735402105822",
		"85882547669956654790",
		"86236545833002564709",
		"86592002206647078477",
		"86948922797639294213",
		"87307313637471695156",
		"87667180782482023726",
		"88028530313955688502",
		"88391368338228459844",
		"88755700986789720641",
		"89121534416386061217",
		"89488874809125285026",
		"89857728372580925047",
		"90228101339897126554",
		"90599999969893973972",
		"90973430547173261829",
		"91348399382224676479",
		"91724912811532510748",
		"92102977197682633914",
		"92482598929470061222",
		"92863784422006956376",
		"93246540116830956002",
		"93630872482014115832",
		"94016788012272123343",
		"94404293229074109917",
		"94793394680752818271",
		"95184098942615325001",
		"95576412617054051779",
		"95970342333658409384",
		"96365894749326841406",
		"96763076548379267638",
		"97161894442670049266",
		"97562355171701464762",
		"97964465502737507752",
		"98368232230918306591",
		"98773662179374976944",
		"99180762199344862928",
		"99589539170287311176",
		"100000000000000000000",
	}
)

func VestedByNow(amount *big.Int, passedSteps, totalSteps uint64) *big.Int {
	tableLen := uint64(len(VestingCoeffs))
	normalizedPassedSteps := passedSteps

	// This branch of code should never execute for normal deposits. But just in case.
	if totalSteps != tableLen {
		normalizedPassedSteps = passedSteps * tableLen / totalSteps
	}

	if normalizedPassedSteps >= tableLen {
		return amount
	}

	coeff, ok := new(big.Int).SetString(VestingCoeffs[normalizedPassedSteps], 10)
	if !ok {
		panic(fmt.Sprintf("failed to parse vesting coefficient #%d", normalizedPassedSteps))
	}
	denominator, ok := new(big.Int).SetString(VestingCoeffDenominator, 10)
	if !ok {
		panic("failed to parse vesting coefficients denominator")
	}

	return new(big.Int).Div(
		new(big.Int).Mul(amount, coeff),
		denominator,
	)
}
